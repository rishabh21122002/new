<div class="row justify-content-center mx-0">
    <!-- todo: move to next pane-->
    <app-badge [item]="selectedRow"></app-badge>
</div>

<div class="container">
    <div class="row py-4 d-flex justify-content-between">
        <kendo-dropdownlist
            #dropdownlist
            kendoDropDownFilter
            [data]="listItems"
            class="dropdownlist-add-new"
            [popupSettings]="{ width: '250px' }"
            (valueChange)="handleValueChange($event, dropdownlist)"
            >
            <ng-template kendoDropDownListValueTemplate>
                <span class="k-icon k-i-plus"></span>
                Add new
            </ng-template>
        </kendo-dropdownlist>

        <app-navigation></app-navigation>

        <kendo-dropdownlist
            class="dropdownlist-services-selector"
            [data]="stockServicesList"
            [iconClass]="'k-i-arrow-chevron-down'"
            [style.width.px]="250"
            [value]="'Financial Services'"
        >
            <ng-template kendoDropDownListValueTemplate let-dataItem>
                Sector: <span class="service-category">{{ dataItem }}</span>
            </ng-template>
        </kendo-dropdownlist>
    </div>

    <div class="row">
        <kendo-grid
            [data]="gridView"
            [sortable]="{
                allowUnsort: allowUnsort,
                mode: multiple ? 'multiple' : 'single'
            }"
            [sort]="sort"
            [selectedKeys]="selectedRows"
            [kendoGridSelectBy]="selectBy"
            (sortChange)="sortChange($event)"
            [selectable]="true"
        >
            <kendo-grid-checkbox-column [width]="27"></kendo-grid-checkbox-column>
            <kendo-grid-column class="grid-symbol-col" field="symbol" title="Symbol" [width]="80"></kendo-grid-column>
            <kendo-grid-column field="name" title="Name" [width]="140"></kendo-grid-column>

            <kendo-grid-column class="price-col" field="price" title="Price" [width]="80">
                <ng-template kendoGridHeaderTemplate let-dataItem>
                    Price
                    <span class="grid-header-subtitle">(Intraday)</span>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column field="day_change" title="Change" [width]="80">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <span [ngClass]="{ 'grid-cell-positive' : dataItem.day_change > 0, 'grid-cell-negative' : dataItem.day_change < 0 }">
                        {{ dataItem.day_change > 0 ? ('+' + dataItem.day_change) : dataItem.day_change }}
                    </span>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column field="change_pct" title="%Change" [width]="80">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <span [ngClass]="{ 'grid-cell-positive' : dataItem.change_pct > 0, 'grid-cell-negative' : dataItem.change_pct < 0 }">
                        {{ dataItem.change_pct > 0 ? ('+' + dataItem.change_pct) : dataItem.change_pct }}%
                    </span>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column field="volume" title="Volume" [width]="100"></kendo-grid-column>

            <kendo-grid-column class="grid-avg-volume-col" field="volume_avg" title="Avg Vol" [width]="80">
                <ng-template kendoGridHeaderTemplate let-dataItem>
                        Avg Vol
                    <span class="grid-header-subtitle">(3 month)</span>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column field="market_cap" title="Market Cap" [width]="120"></kendo-grid-column>

            <kendo-grid-column class="grid-pe-ratio-col" field="pe" title="PE Ratio" [width]="80">
                <ng-template kendoGridHeaderTemplate let-dataItem>
                        PE Ratio
                    <span class="grid-header-subtitle">(TTM)</span>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column field="one_day_chart" title="1 Day Chart" [width]="170"></kendo-grid-column>

            <kendo-grid-column [width]="30">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <span [ngClass]="{ }">
                        <span (click)="addToFavourites(dataItem)" class="k-icon k-i-star-outline"></span>
                    </span>
                </ng-template>
            </kendo-grid-column>
        </kendo-grid>
    </div>
</div>
